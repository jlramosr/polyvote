<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-route/app-route.html">

<link rel="import" href="polyvote-db.html">
<link rel="import" href="polyvote-new.html">
<link rel="import" href="shared-styles.html">

<dom-module id="polyvote-item-edit">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        position: relative;
      }
    </style>

    <polyvote-new
      edit
      item="[[itemClone]]"
      storage="{{storage}}" 
      load-complete="{{loadComplete}}"></polyvote-new>

  </template>

  <script>
    (function() {
      'use strict';

      Polymer({

        is: 'polyvote-item-edit',

        properties: {

          item: {
            type: Object,
            observer: '_itemChanged'
          },

          itemClone: Object,

          loadComplete: Boolean,

          route: String

        },

        addOption() {
          this.$$('polyvote-new').addOption();
        },

        clear() {
          this.itemClone = (JSON.parse(JSON.stringify(this.item)));
        },

        _itemChanged(item) {
          this.itemClone = (JSON.parse(JSON.stringify(item)));
          this.addOption();
        }

      });

  })();
  </script>
</dom-module>
